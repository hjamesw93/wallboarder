doctype html
html
  head
    title= title

    link(rel="stylesheet" href="/components/jquery-ui/themes/base/jquery-ui.min.css")
    link(rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.min.css")
    link(rel="stylesheet" href="/components/font-awesome/css/font-awesome.min.css")
    link(rel="stylesheet" href="/main.css")

    script(src="/components/jquery/dist/jquery.min.js")
    script(src="/components/jquery-ui/jquery-ui.min.js")
    script(src="/components/jquery-tabledit/jquery.tabledit.min.js")
    script(src="/jquery.tinycolorpicker.js")
    script(src="/components/bootstrap/js/collapse.js")

    | <style>
    | .ui-widget-content { border: none !important; }
    - each elem in elems
      if elem.style
        | ##{elem.id} {
        - each i in elem.style
          | #{i[0]}:#{i[1]};
        | }
    | </style>

  body
    div.container-fluid.wb
      - each elem in elems
          if elem.tagName == "table"

            div(id=elem.id class="draggable resizable-table ui-widget-content wb_table editable")
              button.newRow.btn.btn-sm.btn-default
                span.glyphicon.glyphicon-plus

              table#exampleTable.table.table-striped
                - each row in elem.struct.rows
                  tr
                    - each i in row
                      #{i[0]} #{i[1]}
              | <script>
              |  $(function() {
              |     wb_tables.push({
              |        t_elem:  #{elem.id},
              |        params:  {
              |          editButton: false,
              |          deleteButton: true,
              |          hideIdentifier: false,
              |          toolbar: true,
              |          columns: !{JSON.stringify(elem.tableEditColumns)}
              |        }
              |      });
              |     //$("##{elem.id} table").Tabledit(params);
              |   });
              | </script>
          else if elem.tagName == "H1"
            #{elem.tagName}(
              id=elem.id
              class="editable header"
            )= elem.innerText

          else
            #{elem.tagName}(
              id=elem.id
              class="draggable resizable ui-widget-content wb_box box editable")
              div.box-inner
                if elem.decoration
                  div.box-decoration
                    i(class="fa #{elem.decoration}")
                  div(class="box-content" contentEditable="true")= elem.innerText
                else
                  div(class="box-content box-content-full-width" contentEditable="true")= elem.innerText

    div#plt
        div#pltToolbar
          div(class="save btn btn-default")
            span.btn-inner.glyphicon.glyphicon-floppy-save
            p.btn-inner="Save"
          div(class="plt-hide btn btn-default")
            span.btn-inner.glyphicon.glyphicon-remove-circle
            p.btn-inner="Hide"

        div(class="panel-group" id="accordion" role="tablist" aria-multiselectable="true")
          div(class="panel panel-default")
            div(class="panel-heading" role="tab" id="headingOne")
              h4
                a(role="button" data-toggle="collapse" data-parent="#accordion"
                href="#collapseOne" aria-expanded="true" aria-controls="collapseOne")="Insert Text Box"
            div(id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne")
              div(class="panel-body")
                div#preview-box.box.p_box= "Text goes here..."
                div.colorPickers
                div.form-group
                  label(for="boxText")="Text:"
                  input(type="text" id="boxText" name="boxText" placeholder="box text" class="form-control")
                div.form-group
                  label(for="boxDecoration")= "Decoration:"
                  input(type="text" class="form-control boxDecoration" placeholder="fa-icon-name" name="boxDecoration")
                  i

                div.form-group
                  input(type="button" id="addTextBox" class="add btn btn-default", value="Add")

          div(class="panel panel-default")
            div(class="panel-heading" role="tab" id="headingTwo")
              h4
                a(role="button" class="collapsed" data-toggle="collapse" data-parent="#accordion"
                href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo")="Insert Table"
            div(id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo")
              div(class="panel-body")
                div.form-group#tbl-struct-container
                  input(type="text" class="form-control tbl-struct" id="tableCols" name="tableCols" placeholder="Cols")
                  input(type="text" class="form-control tbl-struct" id="tableRows" name="tableRows" placeholder="Rows")
                div#visualGridSelector
                  - var i = 0
                  ul.selectable
                    while i < 18
                      if i >=0
                        - var rs = "a"
                      if i>=6
                        - var rs = "b"
                      if i>=12
                        - var rs = "c"
                      if i == 0
                        li(class="startPoint" data-row=rs id=i++)
                      else
                        li(class="secondary #{rs}" data-row=rs id=i++)
                div#colNames
                div.form-group
                  input(type="button" id="wb-table-confirm" name="wb-table-confirm" value="Confirm" class="btn btn-default form-control hidden")
                div.form-group
                  input(type="button" id="wb-table-cancel" name="wb-table-cancel" value="Cancel" class="btn btn-default form-control hidden")
        div#editZone
        div#binIcon
          span.glyphicon.glyphicon-trash

    script(src="/main.js")
    script(src="/ui.js")
    script(src="/colorPicker.js")
    script(src="/tables.js")
    script(src="/io.js")
